# name: test/sql/odbc_platform.test
# description: test odbc extension
# group: [odbc]

# Require statement will ensure this test is run with this extension loaded
require odbc

# Check platform and use the appropriate driver path
query I
SELECT CASE 
    WHEN lower(platform) LIKE '%osx%' THEN
        (FROM odbc_query('Driver={/duckdb_build_dir/test/drivers/libduckdb_odbc.dylib};Database=:memory:', 'SELECT 42'))
    ELSE
        (FROM odbc_query('Driver={/duckdb_build_dir/test/drivers/libduckdb_odbc.so};Database=:memory:', 'SELECT 42'))
END
FROM pragma_platform();
----
42
